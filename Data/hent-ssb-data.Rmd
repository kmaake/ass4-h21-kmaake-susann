---
title: "hent-ssb-data"
author:
- "Kine MÃ¥kestad"
- "Susann Sivertsen"
fontsize: 12pt
linestrech: 1.5
output:
  pdf_document: default
  html_document:
    df_print: paged
  word_document: default
lang: no-NB
---

```{r setup, include=FALSE}
suppressPackageStartupMessages({
  library(PxWebApiData)
  library(tidyverse)
  library(lubridate)
})
knitr::opts_chunk$set(echo = FALSE, include = FALSE)
```

```{r loaderindata}
load("knr.Rdata")
```

```{r gjennomsnittligkvmpris}
pm2_raw <- ApiData(
  urlToData = "06035",
  Region = knr,
  ContentsCode = "KvPris",
  Boligtype = "01",
  Tid = c(as.character(2002:2017))
) 
```

```{r datasett}
pm2 <- pm2_raw$dataset
```

```{r vekkmedvariabler}
pm2 <- pm2 %>% 
  select(-Boligtype, -ContentsCode) %>% 
  rename(
    knr = Region,
    aar = Tid,
    pm2 = value
  ) 
```

```{r endrernavntildesc}
names(pm2_raw)[[1]] <- "desc"
```

```{r knavn}
pm2 <- pm2 %>% 
  mutate(
    knavn = pm2_raw$desc$region
  )
```

```{r}
pm2$knavn <- str_remove(
  string = pm2$knavn,
  pattern = fixed(" (-2019)")
)
```

```{r}
n <- str_remove(
  string = pm2$knavn, pattern = fixed("(1994-2019")
)
```


```{r}
load("test_string_tib.Rdata")
```


```{r}
moenster <- '.fixed("(1994-2019)")'
```

```{r}
test_string_tib %>% 
  mutate(
    knavn = str_replace(knavn, moenster, "fixed("(1994-2019)")")
  )
```


